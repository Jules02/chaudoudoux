{% extends 'base.html.twig' %}

{% block title %}Accueil{{ parent() }}{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/homepage_loggedin_style.css') }}">
{% endblock %}

{% block body %}
    <div class="content-wrapper" id="content-wrapper">
        <div class="tableau-chaudoudoux">
            <div class="tableau-leftpart tableau-part">
                <div class="last-chaudoudoux">
                    <h3>Derniers chaudoudoux</h3>
                    <ul>
                   {% for chaudoudoux in lastChaudoudoux %}
                       {% set fullName %}{% for name in chaudoudoux.toUser|split('.') %}{{ name|capitalize }} {% endfor %}{% endset %}
                        <li>{{ fullName|trim(' ', 'right') }}<span>, à {{ chaudoudoux.publishedAt|date('H:i', 'Europe/Paris') }}</span></li>
                    {% endfor %}
                    </ul>
                </div>
                <div class="meschaudoudoux">
                    <h3>Mes chaudoudoux</h3>
                    <div class="meschaudoudoux-btncontainer">
                        <a href="{{ path('app_meschaudoudoux') }}" class="meschaudoudoux-btn meschaudoudoux-btn-new"><p>Nouveau ({{ chaudoudouxUnseenLength}})</p><p>+</p></a>
                        <a href="{{ path('app_meschaudoudoux') }}" class="meschaudoudoux-btn"><p>Anciens ({{ chaudoudouxSeenLength}})</p><p>+</p></a>
                    </div>
                </div>
            </div>
            <div class="tableau-splitter"></div>
            <div class="tableau-rightpart tableau-part">
                <div class="classement">
                    <h3>Classement par classe</h3>
                    <div class="classement-classe-wrapper">
                        <div class="classement-classe-container">
                            {% for key, value in chaudoudouxClasseRanked %}
                                <div class="classement-classe{{ loop.index }} classement-classe"><p class="classement-classe-p">{{ key }}</p><p>{{ value }}</p></div>
                            {% endfor %}
                        </div>
                        <a href="{{ path('app_classement') }}" class="classement-complet">Classement complet</a>
                    </div>
                </div>
                <div class="compteur">
                    <h3>Compteur</h3>
                    <div class="compteur-container">
                        <p class="compteur-envoyes"><span>{{ chaudoudouxLength }} CHAUDOUDOUX</span><br/>envoyés depuis le<br/>début de l’opération</p>
                        <a href="{{ path('app_benefices') }}" class="compteur-argent"><span class="argent-compteur-soit">soit</span><br/><span class="compteur-argent-value">{{ chaudoudouxLength / 2}}€</span><br/>reversés à nos hôpitaux</a>
                    </div>
                </div>
            </div>
        </div>
        <a href="{{ path('app_newChaudoudoux') }}" class="send-chaudoudoux-btn btn btn-blue">Envoyer un chaudoudoux</a>
    </div>
{% endblock %}

{% block javascripts %}
{% endblock %}
